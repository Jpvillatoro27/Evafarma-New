"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(auth)/ventas/page",{

/***/ "(app-pages-browser)/./lib/services.ts":
/*!*************************!*\
  !*** ./lib/services.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientesService: () => (/* binding */ clientesService),\n/* harmony export */   cobrosService: () => (/* binding */ cobrosService),\n/* harmony export */   recibosService: () => (/* binding */ recibosService),\n/* harmony export */   usuariosService: () => (/* binding */ usuariosService),\n/* harmony export */   ventasService: () => (/* binding */ ventasService)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(app-pages-browser)/./lib/supabase.ts\");\n/* __next_internal_client_entry_do_not_use__ clientesService,cobrosService,recibosService,ventasService,usuariosService auto */ \n// Servicios de Clientes\nconst clientesService = {\n    async getClientes () {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('clientes').select('*').order('nombre');\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error('Error al obtener clientes:', error);\n            throw error;\n        }\n    },\n    async createCliente (cliente) {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('clientes').insert([\n                cliente\n            ]).select().single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error al crear cliente:', error);\n            throw error;\n        }\n    },\n    async updateCliente (id, cliente) {\n        try {\n            console.log('Actualizando cliente:', {\n                id,\n                ...cliente\n            });\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('clientes').update(cliente).eq('id', id).select().single();\n            if (error) {\n                console.error('Error en la actualización:', error);\n                throw error;\n            }\n            console.log('Cliente actualizado:', data);\n            return data;\n        } catch (error) {\n            console.error('Error al actualizar cliente:', error);\n            throw error;\n        }\n    },\n    async deleteCliente (id) {\n        try {\n            console.log('Eliminando cliente:', id);\n            const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('clientes').delete().eq('id', id);\n            if (error) {\n                console.error('Error en la eliminación:', error);\n                throw error;\n            }\n            console.log('Cliente eliminado');\n        } catch (error) {\n            console.error('Error al eliminar cliente:', error);\n            throw error;\n        }\n    }\n};\n// Servicios de Cobros\nconst cobrosService = {\n    async getCobros () {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('cobros').select(\"\\n          *,\\n          clientes:cliente_id (\\n            id,\\n            codigo,\\n            nombre,\\n            direccion,\\n            telefono,\\n            nit,\\n            propietario,\\n            saldo_pendiente\\n          )\\n        \").order('fecha', {\n                ascending: false\n            });\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error('Error al obtener cobros:', error);\n            throw error;\n        }\n    },\n    async createCobro (cobroData) {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('cobros').insert([\n                cobroData\n            ]).select().single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error al crear cobro:', error);\n            throw error;\n        }\n    },\n    async updateCobro (id, cobroData) {\n        try {\n            console.log('Actualizando cobro:', {\n                id,\n                ...cobroData\n            });\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('cobros').update(cobroData).eq('id', id).select(\"\\n          id,\\n          numero,\\n          fecha,\\n          cod_farmacia,\\n          cliente_id,\\n          descripcion,\\n          total,\\n          visitador,\\n          fecha_cheque,\\n          banco,\\n          numero_cheque,\\n          valor_cheque,\\n          otros,\\n          otros2,\\n          otros3,\\n          created_at,\\n          clientes (\\n            id,\\n            codigo,\\n            nombre,\\n            direccion,\\n            telefono,\\n            nit,\\n            visitador,\\n            propietario,\\n            saldo_pendiente\\n          )\\n        \").single();\n            if (error) {\n                console.error('Error al actualizar cobro:', error);\n                throw new Error(error.message);\n            }\n            console.log('Cobro actualizado:', data);\n            return data;\n        } catch (error) {\n            console.error('Error al actualizar cobro:', error);\n            throw error;\n        }\n    },\n    async deleteCobro (id) {\n        try {\n            console.log('Eliminando cobro:', id);\n            const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('cobros').delete().eq('id', id);\n            if (error) {\n                console.error('Error al eliminar cobro:', error);\n                throw new Error(error.message);\n            }\n            console.log('Cobro eliminado correctamente');\n            return true;\n        } catch (error) {\n            console.error('Error al eliminar cobro:', error);\n            throw error;\n        }\n    }\n};\n// Servicios de Recibos\nconst recibosService = {\n    async getRecibos () {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('recibos').select(\"\\n          *,\\n          clientes:cliente_id (\\n            id,\\n            codigo,\\n            nombre,\\n            direccion,\\n            telefono,\\n            nit,\\n            propietario,\\n            saldo_pendiente\\n          )\\n        \").order('fecha', {\n                ascending: false\n            });\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error('Error al obtener recibos:', error);\n            throw error;\n        }\n    },\n    async createRecibo (reciboData) {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('recibos').insert([\n                reciboData\n            ]).select().single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error al crear recibo:', error);\n            throw error;\n        }\n    }\n};\n// Servicios de Ventas\nconst ventasService = {\n    async getVentas () {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('ventas_mensuales').select(\"\\n          *,\\n          clientes:cliente_id (\\n            id,\\n            codigo,\\n            nombre,\\n            direccion,\\n            telefono,\\n            nit,\\n            propietario,\\n            saldo_pendiente\\n          ),\\n          productos:id (\\n            id,\\n            nombre,\\n            cantidad,\\n            precio_unitario,\\n            total\\n          )\\n        \").order('fecha', {\n                ascending: false\n            });\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error('Error al obtener ventas:', error);\n            throw error;\n        }\n    },\n    async createVenta (ventaData) {\n        try {\n            // 1. Crear la venta\n            const { data: venta, error: ventaError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('ventas_mensuales').insert([\n                {\n                    fecha: ventaData.fecha,\n                    cliente_id: ventaData.cliente_id,\n                    visitador: ventaData.visitador,\n                    total: ventaData.total\n                }\n            ]).select().single();\n            if (ventaError) throw ventaError;\n            // 2. Crear los productos de la venta\n            const productosData = ventaData.productos.map((producto)=>({\n                    ...producto,\n                    venta_id: venta.id\n                }));\n            const { error: productosError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('productos_venta').insert(productosData);\n            if (productosError) throw productosError;\n            // 3. Actualizar el saldo pendiente del cliente\n            const { data: cliente, error: clienteSelectError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('clientes').select('saldo_pendiente').eq('id', ventaData.cliente_id).single();\n            if (clienteSelectError) throw clienteSelectError;\n            const nuevoSaldo = (cliente.saldo_pendiente || 0) + ventaData.total;\n            const { error: clienteUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('clientes').update({\n                saldo_pendiente: nuevoSaldo\n            }).eq('id', ventaData.cliente_id);\n            if (clienteUpdateError) throw clienteUpdateError;\n            return {\n                ...venta,\n                clientes: {\n                    ...venta.clientes,\n                    saldo_pendiente: nuevoSaldo\n                }\n            };\n        } catch (error) {\n            console.error('Error al crear venta:', error);\n            throw error;\n        }\n    },\n    async updateVenta (id, venta) {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('ventas').update(venta).eq('id', id).select(\"\\n          *,\\n          clientes (\\n            id,\\n            nombre,\\n            direccion,\\n            telefono,\\n            email\\n          )\\n        \").single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error al actualizar venta:', error);\n            throw error;\n        }\n    },\n    async deleteVenta (id) {\n        try {\n            const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('ventas').delete().eq('id', id);\n            if (error) throw error;\n        } catch (error) {\n            console.error('Error al eliminar venta:', error);\n            throw error;\n        }\n    }\n};\n// Servicios de Usuarios (Cliente)\nconst usuariosService = {\n    async register (email, password, nombre) {\n        try {\n            // 1. Registrar en auth.users\n            const { data: authData, error: authError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.signUp({\n                email,\n                password,\n                options: {\n                    data: {\n                        nombre,\n                        role: 'visitador'\n                    }\n                }\n            });\n            if (authError) {\n                console.error('Error en auth.signUp:', authError);\n                throw new Error('Error al crear la cuenta de usuario');\n            }\n            if (!(authData === null || authData === void 0 ? void 0 : authData.user)) {\n                throw new Error('No se pudo crear el usuario');\n            }\n            // 2. Crear en la tabla usuarios\n            try {\n                const { error: dbError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('usuarios').insert({\n                    id: authData.user.id,\n                    email: email,\n                    nombre: nombre,\n                    rol: 'visitador',\n                    created_at: new Date().toISOString()\n                });\n                if (dbError) {\n                    console.error('Error al crear usuario en la base de datos:', dbError);\n                    // Verificar si el error es de recursión de políticas\n                    if (dbError.message.includes('infinite recursion')) {\n                        // Si el error es de recursión pero el usuario se creó, continuamos\n                        console.log('Usuario creado a pesar del error de recursión');\n                        return authData;\n                    }\n                    // Para otros tipos de errores, cerramos sesión\n                    await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.signOut();\n                    throw new Error(\"Error al crear el usuario en la base de datos: \".concat(dbError.message));\n                }\n                return authData;\n            } catch (dbError) {\n                // Verificar si el usuario realmente se creó a pesar del error\n                const { data: checkUser } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('usuarios').select('*').eq('id', authData.user.id).single();\n                if (checkUser) {\n                    console.log('Usuario encontrado después del error:', checkUser);\n                    return authData;\n                }\n                // Si no se encontró el usuario, cerramos sesión y lanzamos el error\n                await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.signOut();\n                throw dbError;\n            }\n        } catch (error) {\n            console.error('Error en el registro:', error);\n            throw error;\n        }\n    },\n    async login (email, password) {\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.signInWithPassword({\n                email,\n                password\n            });\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error en el login:', error);\n            if (error instanceof Error && error.message.includes('Invalid login credentials')) {\n                throw new Error('Credenciales inválidas. Por favor, verifica tu email y contraseña.');\n            }\n            throw error;\n        }\n    },\n    async getUsuarioActual () {\n        try {\n            const { data: { user }, error: authError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getUser();\n            if (authError) {\n                console.error('Error al obtener usuario de auth:', authError);\n                throw authError;\n            }\n            if (!user) {\n                throw new Error('No hay usuario autenticado');\n            }\n            // Obtener información adicional del usuario desde la tabla usuarios\n            const { data: usuarioData, error: usuarioError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('usuarios').select('*').eq('id', user.id).single();\n            if (usuarioError) {\n                console.error('Error al obtener datos del usuario:', usuarioError);\n                throw usuarioError;\n            }\n            return {\n                id: user.id,\n                email: user.email,\n                nombre: usuarioData.nombre,\n                rol: usuarioData.rol\n            };\n        } catch (error) {\n            console.error('Error al obtener usuario actual:', error);\n            throw error;\n        }\n    },\n    async logout () {\n        try {\n            const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.signOut();\n            if (error) throw error;\n        } catch (error) {\n            console.error('Error al cerrar sesión:', error);\n            throw error;\n        }\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEQ7Z0JBQ25ELE1BQU1BO1lBQ1I7WUFFQSxJQUFJLENBQUNLLE1BQU07Z0JBQ1QsTUFBTSxJQUFJekMsTUFBTTtZQUNsQjtZQUVBLG9FQUFvRTtZQUNwRSxNQUFNLEVBQUV2QixNQUFNNkUsV0FBVyxFQUFFNUUsT0FBTzZFLFlBQVksRUFBRSxHQUFHLE1BQU1qRiwrQ0FBUUEsQ0FDOURLLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsS0FDUFcsRUFBRSxDQUFDLE1BQU1rRCxLQUFLckQsRUFBRSxFQUNoQkYsTUFBTTtZQUVULElBQUlxRSxjQUFjO2dCQUNoQnpFLFFBQVFKLEtBQUssQ0FBQyx1Q0FBdUM2RTtnQkFDckQsTUFBTUE7WUFDUjtZQUVBLE9BQU87Z0JBQ0xuRSxJQUFJcUQsS0FBS3JELEVBQUU7Z0JBQ1g0QyxPQUFPUyxLQUFLVCxLQUFLO2dCQUNqQkUsUUFBUW9CLFlBQVlwQixNQUFNO2dCQUMxQlMsS0FBS1csWUFBWVgsR0FBRztZQUN0QjtRQUNGLEVBQUUsT0FBT2pFLE9BQU87WUFDZEksUUFBUUosS0FBSyxDQUFDLG9DQUFvQ0E7WUFDbEQsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTThFO1FBQ0osSUFBSTtZQUNGLE1BQU0sRUFBRTlFLEtBQUssRUFBRSxHQUFHLE1BQU1KLCtDQUFRQSxDQUFDK0QsSUFBSSxDQUFDVyxPQUFPO1lBQzdDLElBQUl0RSxPQUFPLE1BQU1BO1FBQ25CLEVBQUUsT0FBT0EsT0FBTztZQUNkSSxRQUFRSixLQUFLLENBQUMsMkJBQTJCQTtZQUN6QyxNQUFNQTtRQUNSO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGpvc2VwXFxPbmVEcml2ZVxcRGVza3RvcFxcT3Ryb3NcXGV2YWZhcm1hLW5leHRcXGxpYlxcc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi9zdXBhYmFzZSdcbmltcG9ydCB7IENsaWVudGUsIENvYnJvLCBBYm9ubywgUmVjaWJvLCBWZW50YU1lbnN1YWwsIFVzdWFyaW8gfSBmcm9tICdAL3R5cGVzJ1xuXG4vLyBTZXJ2aWNpb3MgZGUgQ2xpZW50ZXNcbmV4cG9ydCBjb25zdCBjbGllbnRlc1NlcnZpY2UgPSB7XG4gIGFzeW5jIGdldENsaWVudGVzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY2xpZW50ZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLm9yZGVyKCdub21icmUnKVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gICAgICByZXR1cm4gZGF0YSB8fCBbXVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBvYnRlbmVyIGNsaWVudGVzOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlQ2xpZW50ZShjbGllbnRlOiB7XG4gICAgY29kaWdvOiBzdHJpbmdcbiAgICBub21icmU6IHN0cmluZ1xuICAgIGRpcmVjY2lvbj86IHN0cmluZ1xuICAgIHRlbGVmb25vPzogc3RyaW5nXG4gICAgbml0Pzogc3RyaW5nXG4gICAgdmlzaXRhZG9yOiBzdHJpbmdcbiAgICBwcm9waWV0YXJpbz86IHN0cmluZ1xuICAgIHNhbGRvX3BlbmRpZW50ZT86IG51bWJlclxuICB9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjbGllbnRlcycpXG4gICAgICAgIC5pbnNlcnQoW2NsaWVudGVdKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNyZWFyIGNsaWVudGU6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfSxcblxuICBhc3luYyB1cGRhdGVDbGllbnRlKGlkOiBzdHJpbmcsIGNsaWVudGU6IHtcbiAgICBub21icmU/OiBzdHJpbmdcbiAgICBkaXJlY2Npb24/OiBzdHJpbmdcbiAgICB0ZWxlZm9ubz86IHN0cmluZ1xuICAgIGVtYWlsPzogc3RyaW5nXG4gIH0pIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ0FjdHVhbGl6YW5kbyBjbGllbnRlOicsIHsgaWQsIC4uLmNsaWVudGUgfSlcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjbGllbnRlcycpXG4gICAgICAgIC51cGRhdGUoY2xpZW50ZSlcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBsYSBhY3R1YWxpemFjacOzbjonLCBlcnJvcilcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0NsaWVudGUgYWN0dWFsaXphZG86JywgZGF0YSlcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgY2xpZW50ZTonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIGRlbGV0ZUNsaWVudGUoaWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnRWxpbWluYW5kbyBjbGllbnRlOicsIGlkKVxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NsaWVudGVzJylcbiAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgIC5lcSgnaWQnLCBpZClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGxhIGVsaW1pbmFjacOzbjonLCBlcnJvcilcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0NsaWVudGUgZWxpbWluYWRvJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZWxpbWluYXIgY2xpZW50ZTonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbi8vIFNlcnZpY2lvcyBkZSBDb2Jyb3NcbmV4cG9ydCBjb25zdCBjb2Jyb3NTZXJ2aWNlID0ge1xuICBhc3luYyBnZXRDb2Jyb3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjb2Jyb3MnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIGNsaWVudGVzOmNsaWVudGVfaWQgKFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBjb2RpZ28sXG4gICAgICAgICAgICBub21icmUsXG4gICAgICAgICAgICBkaXJlY2Npb24sXG4gICAgICAgICAgICB0ZWxlZm9ubyxcbiAgICAgICAgICAgIG5pdCxcbiAgICAgICAgICAgIHByb3BpZXRhcmlvLFxuICAgICAgICAgICAgc2FsZG9fcGVuZGllbnRlXG4gICAgICAgICAgKVxuICAgICAgICBgKVxuICAgICAgICAub3JkZXIoJ2ZlY2hhJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIG9idGVuZXIgY29icm9zOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlQ29icm8oY29icm9EYXRhOiB7XG4gICAgbnVtZXJvOiBzdHJpbmdcbiAgICBmZWNoYTogc3RyaW5nXG4gICAgY29kX2Zhcm1hY2lhPzogc3RyaW5nXG4gICAgY2xpZW50ZV9pZDogc3RyaW5nXG4gICAgZGVzY3JpcGNpb24/OiBzdHJpbmdcbiAgICB0b3RhbDogbnVtYmVyXG4gICAgdmlzaXRhZG9yOiBzdHJpbmdcbiAgICBmZWNoYV9jaGVxdWU/OiBzdHJpbmdcbiAgICBiYW5jbz86IHN0cmluZ1xuICAgIG51bWVyb19jaGVxdWU/OiBzdHJpbmdcbiAgICB2YWxvcl9jaGVxdWU/OiBudW1iZXJcbiAgICBvdHJvcz86IHN0cmluZ1xuICAgIG90cm9zMj86IHN0cmluZ1xuICAgIG90cm9zMz86IHN0cmluZ1xuICB9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjb2Jyb3MnKVxuICAgICAgICAuaW5zZXJ0KFtjb2Jyb0RhdGFdKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNyZWFyIGNvYnJvOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlQ29icm8oaWQ6IHN0cmluZywgY29icm9EYXRhOiB7XG4gICAgbnVtZXJvPzogc3RyaW5nXG4gICAgZmVjaGE/OiBzdHJpbmdcbiAgICBjb2RfZmFybWFjaWE/OiBzdHJpbmdcbiAgICBjbGllbnRlX2lkPzogc3RyaW5nXG4gICAgZGVzY3JpcGNpb24/OiBzdHJpbmdcbiAgICB0b3RhbD86IG51bWJlclxuICAgIHZpc2l0YWRvcj86IHN0cmluZ1xuICAgIGZlY2hhX2NoZXF1ZT86IHN0cmluZ1xuICAgIGJhbmNvPzogc3RyaW5nXG4gICAgbnVtZXJvX2NoZXF1ZT86IHN0cmluZ1xuICAgIHZhbG9yX2NoZXF1ZT86IG51bWJlclxuICAgIG90cm9zPzogc3RyaW5nXG4gICAgb3Ryb3MyPzogc3RyaW5nXG4gICAgb3Ryb3MzPzogc3RyaW5nXG4gIH0pIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ0FjdHVhbGl6YW5kbyBjb2JybzonLCB7IGlkLCAuLi5jb2Jyb0RhdGEgfSlcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjb2Jyb3MnKVxuICAgICAgICAudXBkYXRlKGNvYnJvRGF0YSlcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBudW1lcm8sXG4gICAgICAgICAgZmVjaGEsXG4gICAgICAgICAgY29kX2Zhcm1hY2lhLFxuICAgICAgICAgIGNsaWVudGVfaWQsXG4gICAgICAgICAgZGVzY3JpcGNpb24sXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgdmlzaXRhZG9yLFxuICAgICAgICAgIGZlY2hhX2NoZXF1ZSxcbiAgICAgICAgICBiYW5jbyxcbiAgICAgICAgICBudW1lcm9fY2hlcXVlLFxuICAgICAgICAgIHZhbG9yX2NoZXF1ZSxcbiAgICAgICAgICBvdHJvcyxcbiAgICAgICAgICBvdHJvczIsXG4gICAgICAgICAgb3Ryb3MzLFxuICAgICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgICAgY2xpZW50ZXMgKFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBjb2RpZ28sXG4gICAgICAgICAgICBub21icmUsXG4gICAgICAgICAgICBkaXJlY2Npb24sXG4gICAgICAgICAgICB0ZWxlZm9ubyxcbiAgICAgICAgICAgIG5pdCxcbiAgICAgICAgICAgIHZpc2l0YWRvcixcbiAgICAgICAgICAgIHByb3BpZXRhcmlvLFxuICAgICAgICAgICAgc2FsZG9fcGVuZGllbnRlXG4gICAgICAgICAgKVxuICAgICAgICBgKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgY29icm86JywgZXJyb3IpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnQ29icm8gYWN0dWFsaXphZG86JywgZGF0YSlcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgY29icm86JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfSxcblxuICBhc3luYyBkZWxldGVDb2JybyhpZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdFbGltaW5hbmRvIGNvYnJvOicsIGlkKVxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NvYnJvcycpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuZXEoJ2lkJywgaWQpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBlbGltaW5hciBjb2JybzonLCBlcnJvcilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdDb2JybyBlbGltaW5hZG8gY29ycmVjdGFtZW50ZScpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBlbGltaW5hciBjb2JybzonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbi8vIFNlcnZpY2lvcyBkZSBSZWNpYm9zXG5leHBvcnQgY29uc3QgcmVjaWJvc1NlcnZpY2UgPSB7XG4gIGFzeW5jIGdldFJlY2lib3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdyZWNpYm9zJylcbiAgICAgICAgLnNlbGVjdChgXG4gICAgICAgICAgKixcbiAgICAgICAgICBjbGllbnRlczpjbGllbnRlX2lkIChcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgY29kaWdvLFxuICAgICAgICAgICAgbm9tYnJlLFxuICAgICAgICAgICAgZGlyZWNjaW9uLFxuICAgICAgICAgICAgdGVsZWZvbm8sXG4gICAgICAgICAgICBuaXQsXG4gICAgICAgICAgICBwcm9waWV0YXJpbyxcbiAgICAgICAgICAgIHNhbGRvX3BlbmRpZW50ZVxuICAgICAgICAgIClcbiAgICAgICAgYClcbiAgICAgICAgLm9yZGVyKCdmZWNoYScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gICAgICByZXR1cm4gZGF0YSB8fCBbXVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBvYnRlbmVyIHJlY2lib3M6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfSxcblxuICBhc3luYyBjcmVhdGVSZWNpYm8ocmVjaWJvRGF0YToge1xuICAgIG51bWVybzogc3RyaW5nXG4gICAgY2xpZW50ZV9pZDogc3RyaW5nXG4gICAgbnVtZXJvX3JlY2libz86IHN0cmluZ1xuICAgIHZpc2l0YWRvcjogc3RyaW5nXG4gICAgZmVjaGE6IHN0cmluZ1xuICAgIGVmZWN0aXZvX2NoZXF1ZTogJ0VGRUNUSVZPJyB8ICdDSEVRVUUnXG4gICAgdmFsb3I6IG51bWJlclxuICAgIHRvdGFsOiBudW1iZXJcbiAgICBkZXNjcmlwY2lvbj86IHN0cmluZ1xuICB9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdyZWNpYm9zJylcbiAgICAgICAgLmluc2VydChbcmVjaWJvRGF0YV0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY3JlYXIgcmVjaWJvOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cbn1cblxuLy8gU2VydmljaW9zIGRlIFZlbnRhc1xuZXhwb3J0IGNvbnN0IHZlbnRhc1NlcnZpY2UgPSB7XG4gIGFzeW5jIGdldFZlbnRhcygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3ZlbnRhc19tZW5zdWFsZXMnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIGNsaWVudGVzOmNsaWVudGVfaWQgKFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBjb2RpZ28sXG4gICAgICAgICAgICBub21icmUsXG4gICAgICAgICAgICBkaXJlY2Npb24sXG4gICAgICAgICAgICB0ZWxlZm9ubyxcbiAgICAgICAgICAgIG5pdCxcbiAgICAgICAgICAgIHByb3BpZXRhcmlvLFxuICAgICAgICAgICAgc2FsZG9fcGVuZGllbnRlXG4gICAgICAgICAgKSxcbiAgICAgICAgICBwcm9kdWN0b3M6aWQgKFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBub21icmUsXG4gICAgICAgICAgICBjYW50aWRhZCxcbiAgICAgICAgICAgIHByZWNpb191bml0YXJpbyxcbiAgICAgICAgICAgIHRvdGFsXG4gICAgICAgICAgKVxuICAgICAgICBgKVxuICAgICAgICAub3JkZXIoJ2ZlY2hhJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIG9idGVuZXIgdmVudGFzOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlVmVudGEodmVudGFEYXRhOiB7XG4gICAgZmVjaGE6IHN0cmluZ1xuICAgIGNsaWVudGVfaWQ6IHN0cmluZ1xuICAgIHZpc2l0YWRvcjogc3RyaW5nXG4gICAgdG90YWw6IG51bWJlclxuICAgIHByb2R1Y3RvczogQXJyYXk8e1xuICAgICAgbm9tYnJlOiBzdHJpbmdcbiAgICAgIGNhbnRpZGFkOiBudW1iZXJcbiAgICAgIHByZWNpb191bml0YXJpbzogbnVtYmVyXG4gICAgICB0b3RhbDogbnVtYmVyXG4gICAgfT5cbiAgfSkge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBDcmVhciBsYSB2ZW50YVxuICAgICAgY29uc3QgeyBkYXRhOiB2ZW50YSwgZXJyb3I6IHZlbnRhRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd2ZW50YXNfbWVuc3VhbGVzJylcbiAgICAgICAgLmluc2VydChbe1xuICAgICAgICAgIGZlY2hhOiB2ZW50YURhdGEuZmVjaGEsXG4gICAgICAgICAgY2xpZW50ZV9pZDogdmVudGFEYXRhLmNsaWVudGVfaWQsXG4gICAgICAgICAgdmlzaXRhZG9yOiB2ZW50YURhdGEudmlzaXRhZG9yLFxuICAgICAgICAgIHRvdGFsOiB2ZW50YURhdGEudG90YWxcbiAgICAgICAgfV0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKHZlbnRhRXJyb3IpIHRocm93IHZlbnRhRXJyb3JcblxuICAgICAgLy8gMi4gQ3JlYXIgbG9zIHByb2R1Y3RvcyBkZSBsYSB2ZW50YVxuICAgICAgY29uc3QgcHJvZHVjdG9zRGF0YSA9IHZlbnRhRGF0YS5wcm9kdWN0b3MubWFwKHByb2R1Y3RvID0+ICh7XG4gICAgICAgIC4uLnByb2R1Y3RvLFxuICAgICAgICB2ZW50YV9pZDogdmVudGEuaWRcbiAgICAgIH0pKVxuXG4gICAgICBjb25zdCB7IGVycm9yOiBwcm9kdWN0b3NFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3Byb2R1Y3Rvc192ZW50YScpXG4gICAgICAgIC5pbnNlcnQocHJvZHVjdG9zRGF0YSlcblxuICAgICAgaWYgKHByb2R1Y3Rvc0Vycm9yKSB0aHJvdyBwcm9kdWN0b3NFcnJvclxuXG4gICAgICAvLyAzLiBBY3R1YWxpemFyIGVsIHNhbGRvIHBlbmRpZW50ZSBkZWwgY2xpZW50ZVxuICAgICAgY29uc3QgeyBkYXRhOiBjbGllbnRlLCBlcnJvcjogY2xpZW50ZVNlbGVjdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY2xpZW50ZXMnKVxuICAgICAgICAuc2VsZWN0KCdzYWxkb19wZW5kaWVudGUnKVxuICAgICAgICAuZXEoJ2lkJywgdmVudGFEYXRhLmNsaWVudGVfaWQpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoY2xpZW50ZVNlbGVjdEVycm9yKSB0aHJvdyBjbGllbnRlU2VsZWN0RXJyb3JcblxuICAgICAgY29uc3QgbnVldm9TYWxkbyA9IChjbGllbnRlLnNhbGRvX3BlbmRpZW50ZSB8fCAwKSArIHZlbnRhRGF0YS50b3RhbFxuXG4gICAgICBjb25zdCB7IGVycm9yOiBjbGllbnRlVXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjbGllbnRlcycpXG4gICAgICAgIC51cGRhdGUoeyBzYWxkb19wZW5kaWVudGU6IG51ZXZvU2FsZG8gfSlcbiAgICAgICAgLmVxKCdpZCcsIHZlbnRhRGF0YS5jbGllbnRlX2lkKVxuXG4gICAgICBpZiAoY2xpZW50ZVVwZGF0ZUVycm9yKSB0aHJvdyBjbGllbnRlVXBkYXRlRXJyb3JcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udmVudGEsXG4gICAgICAgIGNsaWVudGVzOiB7XG4gICAgICAgICAgLi4udmVudGEuY2xpZW50ZXMsXG4gICAgICAgICAgc2FsZG9fcGVuZGllbnRlOiBudWV2b1NhbGRvXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY3JlYXIgdmVudGE6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfSxcblxuICBhc3luYyB1cGRhdGVWZW50YShpZDogc3RyaW5nLCB2ZW50YToge1xuICAgIG1vbnRvX3RvdGFsPzogbnVtYmVyXG4gICAgZmVjaGFfdmVudGE/OiBzdHJpbmdcbiAgfSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndmVudGFzJylcbiAgICAgICAgLnVwZGF0ZSh2ZW50YSlcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIGNsaWVudGVzIChcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgbm9tYnJlLFxuICAgICAgICAgICAgZGlyZWNjaW9uLFxuICAgICAgICAgICAgdGVsZWZvbm8sXG4gICAgICAgICAgICBlbWFpbFxuICAgICAgICAgIClcbiAgICAgICAgYClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgdmVudGE6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfSxcblxuICBhc3luYyBkZWxldGVWZW50YShpZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd2ZW50YXMnKVxuICAgICAgICAuZGVsZXRlKClcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGVsaW1pbmFyIHZlbnRhOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cbn1cblxuLy8gU2VydmljaW9zIGRlIFVzdWFyaW9zIChDbGllbnRlKVxuZXhwb3J0IGNvbnN0IHVzdWFyaW9zU2VydmljZSA9IHtcbiAgYXN5bmMgcmVnaXN0ZXIoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgbm9tYnJlOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gMS4gUmVnaXN0cmFyIGVuIGF1dGgudXNlcnNcbiAgICAgIGNvbnN0IHsgZGF0YTogYXV0aERhdGEsIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnblVwKHtcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbm9tYnJlLFxuICAgICAgICAgICAgcm9sZTogJ3Zpc2l0YWRvcidcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmIChhdXRoRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gYXV0aC5zaWduVXA6JywgYXV0aEVycm9yKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGFsIGNyZWFyIGxhIGN1ZW50YSBkZSB1c3VhcmlvJylcbiAgICAgIH1cblxuICAgICAgaWYgKCFhdXRoRGF0YT8udXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlIHB1ZG8gY3JlYXIgZWwgdXN1YXJpbycpXG4gICAgICB9XG5cbiAgICAgIC8vIDIuIENyZWFyIGVuIGxhIHRhYmxhIHVzdWFyaW9zXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGVycm9yOiBkYkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCd1c3VhcmlvcycpXG4gICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICBpZDogYXV0aERhdGEudXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgIG5vbWJyZTogbm9tYnJlLFxuICAgICAgICAgICAgcm9sOiAndmlzaXRhZG9yJyxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgaWYgKGRiRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBjcmVhciB1c3VhcmlvIGVuIGxhIGJhc2UgZGUgZGF0b3M6JywgZGJFcnJvcilcbiAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZXJyb3IgZXMgZGUgcmVjdXJzacOzbiBkZSBwb2zDrXRpY2FzXG4gICAgICAgICAgaWYgKGRiRXJyb3IubWVzc2FnZS5pbmNsdWRlcygnaW5maW5pdGUgcmVjdXJzaW9uJykpIHtcbiAgICAgICAgICAgIC8vIFNpIGVsIGVycm9yIGVzIGRlIHJlY3Vyc2nDs24gcGVybyBlbCB1c3VhcmlvIHNlIGNyZcOzLCBjb250aW51YW1vc1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzdWFyaW8gY3JlYWRvIGEgcGVzYXIgZGVsIGVycm9yIGRlIHJlY3Vyc2nDs24nKVxuICAgICAgICAgICAgcmV0dXJuIGF1dGhEYXRhXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFBhcmEgb3Ryb3MgdGlwb3MgZGUgZXJyb3JlcywgY2VycmFtb3Mgc2VzacOzblxuICAgICAgICAgIGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBhbCBjcmVhciBlbCB1c3VhcmlvIGVuIGxhIGJhc2UgZGUgZGF0b3M6ICR7ZGJFcnJvci5tZXNzYWdlfWApXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXV0aERhdGFcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcmVhbG1lbnRlIHNlIGNyZcOzIGEgcGVzYXIgZGVsIGVycm9yXG4gICAgICAgIGNvbnN0IHsgZGF0YTogY2hlY2tVc2VyIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCd1c3VhcmlvcycpXG4gICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgLmVxKCdpZCcsIGF1dGhEYXRhLnVzZXIuaWQpXG4gICAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgICAgaWYgKGNoZWNrVXNlcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc3VhcmlvIGVuY29udHJhZG8gZGVzcHXDqXMgZGVsIGVycm9yOicsIGNoZWNrVXNlcilcbiAgICAgICAgICByZXR1cm4gYXV0aERhdGFcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNpIG5vIHNlIGVuY29udHLDsyBlbCB1c3VhcmlvLCBjZXJyYW1vcyBzZXNpw7NuIHkgbGFuemFtb3MgZWwgZXJyb3JcbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KClcbiAgICAgICAgdGhyb3cgZGJFcnJvclxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBlbCByZWdpc3RybzonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIGxvZ2luKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICB9KVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBlbCBsb2dpbjonLCBlcnJvcilcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ludmFsaWQgbG9naW4gY3JlZGVudGlhbHMnKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NyZWRlbmNpYWxlcyBpbnbDoWxpZGFzLiBQb3IgZmF2b3IsIHZlcmlmaWNhIHR1IGVtYWlsIHkgY29udHJhc2XDsWEuJylcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIGdldFVzdWFyaW9BY3R1YWwoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0sIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gICAgICBcbiAgICAgIGlmIChhdXRoRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgb2J0ZW5lciB1c3VhcmlvIGRlIGF1dGg6JywgYXV0aEVycm9yKVxuICAgICAgICB0aHJvdyBhdXRoRXJyb3JcbiAgICAgIH1cblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gaGF5IHVzdWFyaW8gYXV0ZW50aWNhZG8nKVxuICAgICAgfVxuXG4gICAgICAvLyBPYnRlbmVyIGluZm9ybWFjacOzbiBhZGljaW9uYWwgZGVsIHVzdWFyaW8gZGVzZGUgbGEgdGFibGEgdXN1YXJpb3NcbiAgICAgIGNvbnN0IHsgZGF0YTogdXN1YXJpb0RhdGEsIGVycm9yOiB1c3VhcmlvRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd1c3VhcmlvcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmICh1c3VhcmlvRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgb2J0ZW5lciBkYXRvcyBkZWwgdXN1YXJpbzonLCB1c3VhcmlvRXJyb3IpXG4gICAgICAgIHRocm93IHVzdWFyaW9FcnJvclxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIG5vbWJyZTogdXN1YXJpb0RhdGEubm9tYnJlLFxuICAgICAgICByb2w6IHVzdWFyaW9EYXRhLnJvbFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBvYnRlbmVyIHVzdWFyaW8gYWN0dWFsOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgbG9nb3V0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKVxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBjZXJyYXIgc2VzacOzbjonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59ICJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsImNsaWVudGVzU2VydmljZSIsImdldENsaWVudGVzIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiY29uc29sZSIsImNyZWF0ZUNsaWVudGUiLCJjbGllbnRlIiwiaW5zZXJ0Iiwic2luZ2xlIiwidXBkYXRlQ2xpZW50ZSIsImlkIiwibG9nIiwidXBkYXRlIiwiZXEiLCJkZWxldGVDbGllbnRlIiwiZGVsZXRlIiwiY29icm9zU2VydmljZSIsImdldENvYnJvcyIsImFzY2VuZGluZyIsImNyZWF0ZUNvYnJvIiwiY29icm9EYXRhIiwidXBkYXRlQ29icm8iLCJFcnJvciIsIm1lc3NhZ2UiLCJkZWxldGVDb2JybyIsInJlY2lib3NTZXJ2aWNlIiwiZ2V0UmVjaWJvcyIsImNyZWF0ZVJlY2libyIsInJlY2lib0RhdGEiLCJ2ZW50YXNTZXJ2aWNlIiwiZ2V0VmVudGFzIiwiY3JlYXRlVmVudGEiLCJ2ZW50YURhdGEiLCJ2ZW50YSIsInZlbnRhRXJyb3IiLCJmZWNoYSIsImNsaWVudGVfaWQiLCJ2aXNpdGFkb3IiLCJ0b3RhbCIsInByb2R1Y3Rvc0RhdGEiLCJwcm9kdWN0b3MiLCJtYXAiLCJwcm9kdWN0byIsInZlbnRhX2lkIiwicHJvZHVjdG9zRXJyb3IiLCJjbGllbnRlU2VsZWN0RXJyb3IiLCJudWV2b1NhbGRvIiwic2FsZG9fcGVuZGllbnRlIiwiY2xpZW50ZVVwZGF0ZUVycm9yIiwiY2xpZW50ZXMiLCJ1cGRhdGVWZW50YSIsImRlbGV0ZVZlbnRhIiwidXN1YXJpb3NTZXJ2aWNlIiwicmVnaXN0ZXIiLCJlbWFpbCIsInBhc3N3b3JkIiwibm9tYnJlIiwiYXV0aERhdGEiLCJhdXRoRXJyb3IiLCJhdXRoIiwic2lnblVwIiwib3B0aW9ucyIsInJvbGUiLCJ1c2VyIiwiZGJFcnJvciIsInJvbCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpbmNsdWRlcyIsInNpZ25PdXQiLCJjaGVja1VzZXIiLCJsb2dpbiIsInNpZ25JbldpdGhQYXNzd29yZCIsImdldFVzdWFyaW9BY3R1YWwiLCJnZXRVc2VyIiwidXN1YXJpb0RhdGEiLCJ1c3VhcmlvRXJyb3IiLCJsb2dvdXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/services.ts\n"));

/***/ })

});